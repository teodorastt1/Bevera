@model List<Bevera.Models.Catalog.Product>

@{
    ViewData["Title"] = ViewBag.CategoryName ?? "Категория";
}

<h1 class="mb-4">@ViewData["Title"]</h1>

<div class="row g-3">
    @foreach (var p in Model)
    {
        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <a class="product-card" asp-controller="Client" asp-action="Product" asp-route-id="@p.Id">
                <div class="product-img">
                    <img src="@(p.Images?.FirstOrDefault(i => i.IsMain)?.ImagePath ?? p.Images?.FirstOrDefault()?.ImagePath ?? "/images/image-1.jpg")"
                         alt="@p.Name" />
                </div>

                <div class="product-body">
                    <div class="product-name">@p.Name</div>
                    <div class="product-price">@p.Price.ToString("0.00") лв.</div>
                    <div class="product-stock @(p.StockQty > 0 ? "in" : "out")">
                        @(p.StockQty > 0 ? $"Наличност: {p.StockQty}" : "Няма наличност")
                    </div>
                </div>
            </a>
        </div>
    }
</div>
